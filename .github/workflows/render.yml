name: Render ARDS ICU Video

on:
  workflow_dispatch:

jobs:
  render:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repo
      uses: actions/checkout@v4

    - name: Install system dependencies
      run: |
        sudo apt-get update
        sudo apt-get install -y ffmpeg

    - name: Install Python packages
      run: |
        pip install numpy matplotlib imageio

    - name: Run render script
      run: |
        python render.py

    - name: Upload video artifact
      uses: actions/upload-artifact@v4
      with:
        name: ARDS_ICU_VIDEO
        path: ARDS_Stepwise_Long_Final_ICU.mp4
